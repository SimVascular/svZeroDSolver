<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>svZeroDSolver: svZeroDSolver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">svZeroDSolver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">svZeroDSolver </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md0">Background</a></li>
<li class="level1"><a href="#autotoc_md1">Architecture</a><ul><li class="level2"><a href="#autotoc_md2">Model</a></li>
<li class="level2"><a href="#autotoc_md3">Algebra</a></li>
<li class="level2"><a href="#autotoc_md4">Input/output</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md5">Build svZeroDSolver</a><ul><li class="level2"><a href="#autotoc_md6">Install dependencies on macOS</a></li>
<li class="level2"><a href="#autotoc_md7">Install dependencies on Linux</a></li>
<li class="level2"><a href="#autotoc_md8">Build in debug mode</a></li>
<li class="level2"><a href="#autotoc_md9">Build in release mode</a></li>
<li class="level2"><a href="#autotoc_md10">Build on Sherlock</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md11">Run svZeroDSolver</a><ul><li class="level2"><a href="#autotoc_md12">Simulation parameters</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md13">Developer Guide</a></li>
</ul>
</div>
<div class="textblock"><p >The svZeroDSolver is a fast simulation tool for modeling the hemodynamics of vascular networks using zero-dimensional (0D) lumped parameter models.</p>
<ul>
<li><a href="https://github.com/SimVascular/svZeroDSolver">Source repository</a></li>
<li><p class="startli"><a href="https://simvascular.github.io">About SimVascular</a></p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[
\begin{circuitikz} \draw
node[left] {$Q_{in}$} [-latex] (0,0) -- (0.8,0);
\draw (1,0) node[anchor=south]{$P_{in}$}
to [R, l=$R$, *-] (3,0)
to [L, l=$L$, *-*] (5,0)
node[anchor=south]{$P_{out}$}
(3,0) to [C, l=$C$, *-] (3,-1.5)
node[ground]{$P_C$};
\draw [-latex] (5.2,0) -- (6,0) node[right] {$Q_{out}$};
\end{circuitikz}
\]" src="form_5.png" width="266" height="96"/>
</p>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md0"></a>
Background</h1>
<p >Zero-dimensional (0D) models are lightweight methods to simulate bulk hemodynamic quantities in the cardiovascular system. Unlike 3D and 1D models, 0D models are purely time-dependent; they are unable to simulate spatial patterns in the hemodynamics. 0D models are analogous to electrical circuits. The flow rate simulated by 0D models represents electrical current, while the pressure represents voltage. Three primary building blocks of 0D models are resistors, capacitors, and inductors Resistance captures the viscous effects of blood flow, capacitance represents the compliance and distensibility of the vessel wall, and inductance represents the inertia of the blood flow. Different combinations of these building blocks, as well as others, can be formed to reflect the hemodynamics and physiology of different cardiovascular anatomies.These 0D models are governed by differential algebraic equations (DAEs).</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Architecture</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Model</h2>
<p >The solver uses a highly modular framework to model the vascular anatomy, using individual classes to represent different 0D elements of the model. The elements are part of the <a class="el" href="namespace_m_o_d_e_l.html" title="MODEL namespace.">MODEL</a> namespace. Currently supported elements are:</p>
<ul>
<li><a class="el" href="class_m_o_d_e_l_1_1_blood_vessel.html" title="Resistor-capacitor-inductor blood vessel with optional stenosis.">MODEL::BloodVessel</a>: RCL blood vessel respresentation with optional stenosis.</li>
<li><a class="el" href="class_m_o_d_e_l_1_1_junction.html" title="Junction.">MODEL::Junction</a>: Junction element with arbitrary inlets and outlets.</li>
<li><a class="el" href="class_m_o_d_e_l_1_1_flow_reference_b_c.html" title="Flow reference boundary condition.">MODEL::FlowReferenceBC</a>: Prescribed flow boundary condition.</li>
<li><a class="el" href="class_m_o_d_e_l_1_1_pressure_reference_b_c.html" title="Pressure reference boundary condition.">MODEL::PressureReferenceBC</a>: Prescribed pressure boundary condition.</li>
<li><a class="el" href="class_m_o_d_e_l_1_1_resistance_b_c.html" title="Resistance boundary condition.">MODEL::ResistanceBC</a>: Resistance boundary condition.</li>
<li><a class="el" href="class_m_o_d_e_l_1_1_windkessel_b_c.html" title="Windkessel RCR boundary condition.">MODEL::WindkesselBC</a>: RCR Windkessel boundary condition.</li>
<li><a class="el" href="class_m_o_d_e_l_1_1_open_loop_coronary_b_c.html" title="Open loop coronary boundary condition based on .">MODEL::OpenLoopCoronaryBC</a>: Open Loop coronary boundary condition.</li>
</ul>
<p >The elements are based on the parent <a class="el" href="class_m_o_d_e_l_1_1_block.html" title="Base class for 0D model components.">MODEL::Block</a> class. More information about the elements can be found on their respective pages. The elements are connected to each other via nodes (see <a class="el" href="class_m_o_d_e_l_1_1_node.html" title="Node.">MODEL::Node</a>). Each node corresponds to a flow and a pressure value of the model. The <a class="el" href="class_m_o_d_e_l_1_1_d_o_f_handler.html" title="Degree-of-freedom handler.">MODEL::DOFHandler</a> handles the degrees-of-freedom (DOF) of the system by assigning DOF indices to each element that determine the location of the local element contribution in the global system. The complete model is stored and managed by the <a class="el" href="class_m_o_d_e_l_1_1_model.html" title="Model of 0D elements.">MODEL::Model</a> class.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Algebra</h2>
<p >Everything related to solving the system of equation is contained in the <a class="el" href="namespace_a_l_g_e_b_r_a.html" title="ALGEBRA namespace.">ALGEBRA</a> namespace. The svZeroDSolver provides two different strategies for handling the system of equation: a dense strategy (see <a class="el" href="class_a_l_g_e_b_r_a_1_1_dense_system.html" title="Dense system.">ALGEBRA::DenseSystem</a>) and a sparse strategy (<a class="el" href="class_a_l_g_e_b_r_a_1_1_sparse_system.html" title="Sparse system.">ALGEBRA::SparseSystem</a>). The <a class="el" href="class_a_l_g_e_b_r_a_1_1_integrator.html" title="Generalized-alpha integrator.">ALGEBRA::Integrator</a> handles the time integration scheme (see Integrator documentation for more information on that).</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Input/output</h2>
<p >Finally the <a class="el" href="namespace_i_o.html" title="IO namespace.">IO</a> namespace provides everything related to reading and writing files. The <a class="el" href="class_i_o_1_1_config_reader.html" title="svZeroDSolver configuration reader.">IO::ConfigReader</a> reads the simultion config and <a class="el" href="namespace_i_o.html#a456fee8c34646a806d7ffc47d2692236" title="Write the solution to a csv file.">IO::write_csv</a> and <a class="el" href="namespace_i_o.html#afa9845e77ecf4f0cd1d312b2af111973" title="Write the solution to a json file.">IO::write_json</a> are two different methods for writing the result files.</p>
<p >All classes make use of templates to allow easy exchange of scalar types like <code>double</code> or <code>float</code> or to switch between sparse and dense systems.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Build svZeroDSolver</h1>
<p >svZeroDSolver can be build easily via CMake. Make sure you have the following dependencies installed before you start:</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Install dependencies on macOS</h2>
<div class="fragment"><div class="line">brew install eigen       # Linear algebra library</div>
<div class="line">brew install jsoncpp     # Standard json library</div>
<div class="line">brew install simdjson    # Fast json input parser</div>
<div class="line">brew install pybind11    # Python bindings</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Install dependencies on Linux</h2>
<div class="fragment"><div class="line">sudo apt install libeigen3-dev       # Linear algebra library</div>
<div class="line">sudo apt install libjsoncpp-dev      # Standard json library</div>
<div class="line">sudo apt install libsimdjson-dev     # Fast json input parser</div>
<div class="line">sudo apt install pybind11-dev        # Python bindings</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Build in debug mode</h2>
<div class="fragment"><div class="line">mkdir Debug</div>
<div class="line">cd Debug</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Debug ..</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Build in release mode</h2>
<div class="fragment"><div class="line">mkdir Release</div>
<div class="line">cd Release</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..</div>
<div class="line">cmake --build .</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Build on Sherlock</h2>
<div class="fragment"><div class="line">ml load cmake/3.23.1</div>
<div class="line">ml load gcc/12.1.0</div>
<div class="line">ml load python/3.9.0</div>
<div class="line">ml load binutils/2.38</div>
<div class="line">mkdir externals</div>
<div class="line">cd externals</div>
<div class="line">git clone https:<span class="comment">//gitlab.com/libeigen/eigen.git</span></div>
<div class="line">git clone https:<span class="comment">//github.com/simdjson/simdjson.git</span></div>
<div class="line">git clone https:<span class="comment">//github.com/open-source-parsers/jsoncpp.git</span></div>
<div class="line">git clone https:<span class="comment">//github.com/pybind/pybind11.git</span></div>
<div class="line">cd ..</div>
<div class="line">mkdir Release</div>
<div class="line">cd Release</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release -DCLUSTER=ON -DCMAKE_CXX_COMPILER=/share/software/user/open/gcc/12.1.0/bin/g++ -DCMAKE_C_COMPILER=/share/software/user/open/gcc/12.1.0/bin/gcc -DPYTHON_EXECUTABLE=/share/software/user/open/python/3.9.0/bin/python3 ..</div>
<div class="line">cmake --build </div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11"></a>
Run svZeroDSolver</h1>
<p >After building svZeroDSolver, the build folder contains an executable called <code>svzerodsolver</code>. Run it with one of:</p>
<div class="fragment"><div class="line">./svzerodsolver path/to/config.json path/to/output.json  # For json output</div>
<div class="line">file format</div>
<div class="line">./svzerodsolver path/to/config.json path/to/output.csv   # For csv output</div>
<div class="line">file format (faster) </div>
</div><!-- fragment --><p ><code>path/to/config.json</code> and <code>path/to/output</code> should be replaced by the correct paths to the input and output file, respectively.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Simulation parameters</h2>
<p >The svZeroDSolver can be configured with the following options in the <code>simulation_parameters</code> section of the input file. Parameters without a default value must be specified.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter key   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">number_of_cardiac_cycles   </td><td class="markdownTableBodyNone">Number of cardiac cycles to simulate   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">number_of_time_pts_per_cardiac_cycle   </td><td class="markdownTableBodyNone">Number of time steps per cardiac cycle   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">absolute_tolerance   </td><td class="markdownTableBodyNone">Absolute tolerance for time integration   </td><td class="markdownTableBodyNone"><img class="formulaInl" alt="$10^{-8}$" src="form_6.png" width="25" height="11"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">maximum_nonlinear_iterations   </td><td class="markdownTableBodyNone">Maximum number of nonlinear iterations for time integration   </td><td class="markdownTableBodyNone"><img class="formulaInl" alt="$30$" src="form_7.png" width="14" height="9"/>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">output_interval   </td><td class="markdownTableBodyNone">The frequency of writing timesteps to the output (1 means every time step is written to output)   </td><td class="markdownTableBodyNone"><img class="formulaInl" alt="$1$" src="form_8.png" width="5" height="9"/>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">steady_initial   </td><td class="markdownTableBodyNone">Toggle whether to use the steady solution as the initial condition for the simulation   </td><td class="markdownTableBodyNone">true    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">output_mean_only   </td><td class="markdownTableBodyNone">Write only the mean values over every timestep in the output file (only in csv)   </td><td class="markdownTableBodyNone">false   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md13"></a>
Developer Guide</h1>
<p >If you are a developer and want to contribute to svZeroDSolver, you can find more helpful information in our <a class="el" href="md_developer_guide.html">Developer Guide</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jul 17 2022 01:35:10 for svZeroDSolver by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
